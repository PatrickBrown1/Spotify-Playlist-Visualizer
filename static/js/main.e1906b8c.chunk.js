(this["webpackJsonpspotify-playlist-visualizer"]=this["webpackJsonpspotify-playlist-visualizer"]||[]).push([[0],{218:function(e,t,a){e.exports=a.p+"static/media/vinyl-record-svgrepo-com.d364111c.svg"},246:function(e,t,a){e.exports=a(409)},251:function(e,t,a){},269:function(e,t,a){},299:function(e,t,a){},300:function(e,t,a){},409:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),s=a(41),l=a.n(s),i=(a(251),a(12)),o=a.n(i),c=a(18),u=a(36),d=a(37),h=a(39),m=a(38),p=["user-top-read","playlist-read-private"],g=a(57),y=a.n(g),b=window.location.hash.substring(1).split("&").reduce((function(e,t){if(t){var a=t.split("=");e[a[0]]=decodeURIComponent(a[1])}return e}),{});window.location.hash="";var f=b,v=a(74),E=a(16),w=(a(269),a(457)),k=a(218),x=a.n(k),S=function(e){Object(h.a)(a,e);var t=Object(m.a)(a);function a(){return Object(u.a)(this,a),t.call(this)}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=Object(c.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){return r.a.createElement("div",{class:"grid-container"},r.a.createElement("div",{class:"item white-bg"}),r.a.createElement("div",{class:"item white-bg"}),r.a.createElement("div",{class:"item white-bg right-border"}),r.a.createElement("div",{class:"item navy-bg left-border"}),r.a.createElement("div",{class:"item navy-bg"}),r.a.createElement("div",{class:"item white-bg"}),r.a.createElement("div",{class:"item white-bg"},r.a.createElement("div",null,r.a.createElement("h1",{class:"title-header"},"Playlist Analyzer")),r.a.createElement("div",null,r.a.createElement("h2",{class:"subtitle-header"},"Discover your music"))),r.a.createElement("div",{class:"circle-item"},r.a.createElement("div",{id:"record-container"},r.a.createElement("img",{id:"record",src:x.a,alt:"record",height:"90%",width:"90%"}))),r.a.createElement("div",{class:"item navy-bg"}),r.a.createElement("div",{class:"item white-bg"}),r.a.createElement("div",{class:"item white-bg"},!this.props.auth_token&&r.a.createElement(w.a,{type:"primary",className:"main-button",href:"".concat("https://accounts.spotify.com/authorize","?client_id=").concat("ba5c71353dfa472db62a421dab61053a","&redirect_uri=").concat("http://localhost:3000/data","&scope=").concat(p.join("%20"),"&response_type=token&show_dialog=true")},"Login to Spotify"),this.props.auth_token&&r.a.createElement(v.b,{to:"/data"},r.a.createElement(w.a,{type:"primary",className:"main-button"},"Explore"))),r.a.createElement("div",{class:"item navy-bg"}),r.a.createElement("div",{class:"item white-bg"}),r.a.createElement("div",{class:"item white-bg"}),r.a.createElement("div",{class:"item white-bg right-border"}),r.a.createElement("div",{class:"item navy-bg left-border"}),r.a.createElement("div",{class:"item navy-bg"}))}}]),a}(n.Component),O=a(15),j=a(156),C=a(444),A=a(445),P=a(446),_=a(447),N=a(443),T=a(448),L=function(e){var t=Object(N.a)((function(e){var t;return{card:{display:"flex",transition:"box-shadow 0.2s",height:"17vw",width:"34vw",opacity:1,filter:"grayscale(0%)","&:hover":{transition:"box-shadow 0.2s",boxShadow:"0 3px 6px -4px rgba(0, 0, 0, 0.36), 0 6px 16px 0 rgba(0, 0, 0, 0.24), 0 9px 28px 8px rgba(0, 0, 0, 0.15)"}},cardGrayscale:(t={display:"flex",transition:"box-shadow 0.2s",height:"17vw",width:"34vw",opacity:1,filter:"grayscale(0%)","&:hover":{transition:"box-shadow 0.2s",boxShadow:"0 3px 6px -4px rgba(0, 0, 0, 0.36), 0 6px 16px 0 rgba(0, 0, 0, 0.24), 0 9px 28px 8px rgba(0, 0, 0, 0.15)"}},Object(j.a)(t,"opacity","0.4"),Object(j.a)(t,"filter","grayscale(70%)"),t),textContainer:{display:"flex 1 0 auto",flexDirection:"column",width:"17vw",height:"17vw",padding:"5px",margin:0},titlePadding:{padding:"10px"},albumImage:{minHeight:"17vw",minWidth:"17vw",maxHeight:"17vw",maxWidth:"17vw"},infoContainer:{color:"black",width:"100%","& span":{fontStyle:"bold"},padding:"10px"}}}))(),a=e.playlistObject.name,n=e.playlistObject.tracks.total,s=e.playlistObject.owner.display_name,l=e.playlistObject.images,i=e.playlistObject.collaborative;return e.toBeUsed?r.a.createElement(C.a,{className:t.card,bordered:!0,onClick:function(){return e.handleCardClick(e.playlistObject.id)}},r.a.createElement(A.a,{className:t.albumImage,component:"img",image:l[0].url,title:a+" playlist cover"}),r.a.createElement(P.a,{className:t.textContainer},r.a.createElement(_.a,{className:t.titlePadding,align:"center",variant:"h4",component:"h3"},a),r.a.createElement(T.a,null),r.a.createElement("div",{className:t.infoContainer},r.a.createElement(_.a,{align:"center",variant:"body1"},r.a.createElement("b",null,"Owner:")," ",s),r.a.createElement(_.a,{align:"center",variant:"body1"},r.a.createElement("b",null,"No. Songs:")," ",n),r.a.createElement(_.a,{align:"center",variant:"body1"},r.a.createElement("b",null,"Collaborative:")," ",i?"True":"False")))):r.a.createElement(C.a,{className:t.cardGrayscale,bordered:!0,onClick:function(){return e.handleCardClick(e.playlistObject.id)}},r.a.createElement(A.a,{className:t.albumImage,component:"img",image:l[0].url,title:a+" playlist cover"}),r.a.createElement(P.a,{className:t.textContainer},r.a.createElement(_.a,{className:t.titlePadding,align:"center",variant:"h4",component:"h3"},a),r.a.createElement(T.a,null),r.a.createElement("div",{className:t.infoContainer},r.a.createElement(_.a,{align:"center",variant:"body1"},r.a.createElement("b",null,"Owner:")," ",s),r.a.createElement(_.a,{align:"center",variant:"body1"},r.a.createElement("b",null,"No. Songs:")," ",n),r.a.createElement(_.a,{align:"center",variant:"body1"},r.a.createElement("b",null,"Collaborative:")," ",i?"True":"False"))))};a(299);function D(e,t){return M.apply(this,arguments)}function M(){return(M=Object(c.a)(o.a.mark((function e(t,a){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",y()({method:"GET",url:a,headers:{Authorization:"Bearer "+t}}).then((function(e){return e})).catch((function(e){e.response?(console.log(e.response.data),console.log(e.response.status),console.log(e.response.headers)):e.request?console.log(e.request):console.log("Error",e.message),console.log(e)})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function B(e){return G.apply(this,arguments)}function G(){return(G=Object(c.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",D(t,"https://api.spotify.com/v1/me"));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function U(e){return W.apply(this,arguments)}function W(){return(W=Object(c.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",I(t));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function I(e){return z.apply(this,arguments)}function z(){return(z=Object(c.a)(o.a.mark((function e(t){var a,n,r,s,l,i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=[],n=!0,1,l="https://api.spotify.com/v1/me/playlists?limit="+(r=50)+"&offset="+(s=0),i=null;case 7:if(!n){e.next=17;break}return null!==i&&(l=i.next),console.log("Fetching playlists "+s+" - "+(s+r)),e.next=12,y()({method:"GET",url:l,headers:{Authorization:"Bearer "+t}}).then((function(e){null===e.data.next&&(n=!1),i=e.data,a=a.concat(e.data.items)})).catch((function(e){n=!1,e.response?(console.log(e.response.data),console.log(e.response.status),console.log(e.response.headers)):e.request?console.log(e.request):console.log("Error",e.message),console.log(e)}));case 12:e.sent,s+=50,1,e.next=7;break;case 17:return console.log(a),e.abrupt("return",a);case 19:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function F(e,t){return q.apply(this,arguments)}function q(){return(q=Object(c.a)(o.a.mark((function e(t,a){var n,r,s=this;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("fetching songs"),n=[],r=a,console.log("get all songs, link: "+r),1;case 5:if(null==r){e.next=11;break}return e.next=8,y()({method:"GET",url:r,headers:{Authorization:"Bearer "+t}}).then((function(e){var t=e.data;r=t.next;var a,s=t.items;0;var l=s.length;for(a=0;a<l;a++)n.push(s[a].track)})).catch((function(e){if(e.response)if(console.log(e.response.data),console.log(e.response.status),console.log(e.response.headers),429==e.response.status){console.log("429 error... waiting"),console.log("headers: "+e.response.headers);var t=parseInt(e.response.headers["retry-after"]);console.log("waiting... "+t+"s"),s.timeout(1e3*t+1)}else r=null;else e.request?(r=null,console.log(e.request)):(r=null,console.log("Error",e.message));console.log(e)}));case 8:e.sent,e.next=5;break;case 11:return console.log("ALL SONG PLAYLIST"),console.log(n),e.abrupt("return",n);case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function H(e,t){return R.apply(this,arguments)}function R(){return(R=Object(c.a)(o.a.mark((function e(t,a){var n,r,s,l,i,c,u=this;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("GETTING SONG OBJECTS"),n=a.slice(),r=[],s="https://api.spotify.com/v1/audio-features",l=!0;case 5:if(1!=l){e.next=15;break}for(i="",c=0;n.length>0&&c<100;)c%100!=0&&(i+=","),i+=n.pop().id,c++;return 0===n.length&&(l=!1),e.next=12,y()({method:"GET",url:s,params:{ids:i},headers:{Authorization:"Bearer "+t}}).then((function(e){e.data.audio_features.forEach((function(e){r.push({id:e.id,song_analysis:e})}))})).catch((function(e){if(e.response)if(console.log(e.response.data),console.log(e.response.status),console.log(e.response.headers),429==e.response.status){console.log("429 error... waiting"),console.log("headers: "+e.response.headers);var t=parseInt(e.response.headers["retry-after"]);console.log("waiting... "+t+"s"),u.timeout(1e3*t+1)}else l=!1;else e.request?(l=!1,console.log(e.request)):(l=!1,console.log("Error",e.message));console.log(e)}));case 12:e.sent,e.next=5;break;case 15:return console.log("---------------------------------------"),e.abrupt("return",r);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var J=a(456),Y=a(455),V=a(459),$=a(412),K=a(163),Q=(a(300),a(66)),X=a(461),Z=a(465),ee=a(466),te=a(464),ae=a(470),ne=a(157),re=a.n(ne);a(301);function se(e,t,a){var n=[],r=e,s=t;return a.allSongsArray.forEach((function(e){void 0===e&&(console.log("undefined"),console.log(e)),null===e&&(console.log("null"),console.log(e)),void 0===e.song_analysis&&(console.log("song analysis undefined"),console.log(e)),null===e.song_analysis&&(console.log("song analysis null"),console.log(e)),n.push({x:e.song_analysis[r],y:e.song_analysis[s],label_text:e.name+": "+e.song_analysis[r]+","+e.song_analysis[s]})})),n}function le(e){var t=Object(N.a)((function(e){return{root:{display:"flex",flexDirection:"column",height:"80vh",color:"black"},titlediv:{height:"5vh"},dropdownDiv:{display:"flex",flexDirection:"row",height:"7vh"},dropdownItem:{display:"flex",flexDirection:"column",alignItems:"center",width:"50%"},dropDown:{height:"10%",width:"40%",pointerEvents:"default"},labelText:{pointerEvents:"none"},graphDiv:{height:"68vh"}}}))(),a=r.a.useState("danceability"),n=Object(Q.a)(a,2),s=n[0],l=n[1],i=r.a.useState("energy"),o=Object(Q.a)(i,2),c=o[0],u=o[1],d=r.a.useState(""),h=Object(Q.a)(d,2),m=(h[0],h[1]),p=function(e,t){var a={},n=t;switch(e){case"acousticness":case"danceability":case"energy":case"instrumentalness":case"liveness":a.x=[0,1];break;case"loudness":a.x=[-60,0];break;case"speechiness":case"valence":a.x=[0,1];break;case"tempo":a.x=[0,250];break;default:a.x=[0,100]}switch(n){case"acousticness":case"danceability":case"energy":case"instrumentalness":case"liveness":a.y=[0,1];break;case"loudness":a.y=[-60,0];break;case"speechiness":case"valence":a.y=[0,1];break;case"tempo":a.y=[0,250];break;default:a.y=[0,100]}return a}(s,c),g=["acousticness","danceability","energy","instrumentalness","liveness","loudness","speechiness","valence","tempo"];return r.a.createElement(V.a,{className:t.root},r.a.createElement("div",{className:t.titleDiv},r.a.createElement(_.a,{align:"center",color:"black",variant:"h2",component:"h1"},"Song Graph")),r.a.createElement("div",{className:t.dropdownDiv},r.a.createElement("div",{className:t.dropdownItem},r.a.createElement(_.a,{align:"center",color:"black",variant:"h4",component:"h2"},"Domain (x)"),r.a.createElement(re.a,{className:t.dropDown,options:g,onChange:function(e){l(e.value)},value:s,placeholder:"Select an option"})),r.a.createElement("div",{className:t.dropdownItem},r.a.createElement(_.a,{align:"center",color:"black",variant:"h4",component:"h2"},"Range (y)"),r.a.createElement(re.a,{className:t.dropDown,options:g,onChange:function(e){u(e.value)},value:c,placeholder:"Select an option"}))),r.a.createElement(X.a,{theme:Z.a.material,domain:p,width:e.width,height:e.height},r.a.createElement(ee.a,{style:{data:{fill:"#c43a31"}},size:7,data:se(s,c,e),labels:function(e){e.datum;return""},labelComponent:r.a.createElement(te.a,{className:t.labelText}),events:[{target:"data",eventHandlers:{onMouseEnter:function(){return[{target:"labels",mutation:function(e){return m("a"),console.log(e),{text:e.datum.label_text}}},{target:"data",mutation:function(e){return m("b"),{style:{fill:"#dc625a"}}}}]},onMouseLeave:function(){return[{target:"labels",mutation:function(e){return m("c"),{text:""}}},{target:"data",mutation:function(e){return m("d"),null}}]}}}]}),r.a.createElement(ae.a,{crossAxis:!0,domain:p.x,label:s,width:e.width,height:e.height,standalone:!1,axisLabelComponent:r.a.createElement(te.a,{dy:20})}),r.a.createElement(ae.a,{dependentAxis:!0,domain:p.y,label:c,width:e.width,height:e.height,standalone:!1,axisLabelComponent:r.a.createElement(te.a,{dy:-30})})))}var ie=a(467),oe=a(460),ce=a(473),ue=function(e){Object(h.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this)).state={},n.popularArtistPieChart=n.popularArtistPieChart.bind(Object(O.a)(n)),n}return Object(d.a)(a,[{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){}},{key:"popularArtistPieChart",value:function(){var e=[],t=[],a=this.props.artistToSongMap,n=[],r=[],s=function(e,t){var a=e.y,n=t.y,r=0;return a>n?r=1:a<n&&(r=-1),-1*r};Object.keys(a).forEach((function(e){var t=e,l=a[e].length;if(n.length<5)n.push({x:t,y:l,label:t+", "+l+" appearances"});else{n.sort(s);var i=n[4];l>i.y?(n.pop(),n.push({x:t,y:l,label:t+", "+l+" appearances"}),r.push(i),n.sort(s)):r.push({x:t,y:l,label:t+", "+l+" appearances"})}})),n.forEach((function(a){e.push(a),t.push({name:a.x})}));var l=0;return r.forEach((function(e){l+=e.y})),0!=l&&(e.push({x:"Other",y:l,label:"Other, "+l+" appearances"}),t.push({name:"Other"})),console.log(t),[e,t]}},{key:"render",value:function(){var e=this,t=this.popularArtistPieChart();return r.a.createElement("div",null,r.a.createElement("svg",{viewBox:"0 0 800 400",style:{overflow:"visible"}},r.a.createElement(ie.a,{standalone:!1,title:"Legend",centerTitle:!0,x:80,y:80,width:50,height:200,padding:{top:100,bottom:100,left:10},borderPadding:{left:15,right:20},colorScale:["tomato","orange","gold","lightblue","darkorchid","lightgreen"],style:{border:{stroke:"black"}},data:t[1]}),r.a.createElement(oe.a,{standalone:!1,padding:{top:50,bottom:50,left:100,right:-400},width:500,height:450,colorScale:["tomato","orange","gold","lightblue","darkorchid","lightgreen"],labels:function(e){e.datum;return"a"},labelComponent:r.a.createElement(ce.a,{center:!0,cornerRadius:0,pointerLength:0,flyoutPadding:12,flyoutStyle:{stroke:"black",fill:"white"}}),data:t[0],events:[{target:"data",eventHandlers:{onMouseOver:function(){return e.setState({A:"a"}),[{target:"labels",mutation:function(){return{active:!0}}}]},onMouseOut:function(){return e.setState({A:"a"}),[{target:"labels",mutation:function(){return{active:!1}}}]}}}]})))}}]),a}(n.Component),de=a(232),he=a.n(de),me=a(453),pe=a(454),ge=a(451),ye=a(452),be=a(449),fe=a(450),ve=a(463);function Ee(e,t,a){return"songname"===a||"artists"===a?t[a].localeCompare(e[a])<0?-1:t[a].localeCompare(e[a])>0?1:0:t[a]<e[a]?-1:t[a]>e[a]?1:0}function we(e){var t=e.order,a=e.orderBy,n=e.onRequestSort;return r.a.createElement(be.a,null,r.a.createElement(fe.a,null,[{id:"songname",displayLabel:"Song Name"},{id:"artists",displayLabel:"Artist(s)"},{id:"album",displayLabel:"Album"},{id:"acousticness",displayLabel:"Acousticness"},{id:"danceability",displayLabel:"Danceability"},{id:"energy",displayLabel:"Energy"},{id:"instrumentalness",displayLabel:"Instrumentalness"},{id:"liveness",displayLabel:"Liveness"},{id:"loudness",displayLabel:"Loudness"},{id:"speechiness",displayLabel:"Speechiness"},{id:"valence",displayLabel:"Valence"},{id:"tempo",displayLabel:"Tempo"}].map((function(e){return r.a.createElement(ge.a,{key:e.id,sortDirection:a===e.id&&t,align:"right"},r.a.createElement(ve.a,{active:a===e.id,direction:a===e.id?t:"asc",onClick:(s=e.id,function(e){n(e,s)})},e.displayLabel));var s}))))}function ke(e){var t=r.a.useState(e.songList.map((function(e){return function(e){var t="",a=0;e.artists.forEach((function(e){0!==a&&(t+=", "),t+=e.name,a++}));var n=e.name,r=e.album.name,s=e.song_analysis.acousticness,l=e.song_analysis.danceability,i=e.song_analysis.energy,o=e.song_analysis.instrumentalness,c=e.song_analysis.liveness,u=e.song_analysis.loudness,d=e.song_analysis.speechiness,h=e.song_analysis.valence,m=e.song_analysis.tempo;return{songname:n,artists:t,album:r,acousticness:s,danceability:l,energy:i,instrumentalness:o,liveness:c,loudness:u,speechiness:d,valence:h,tempo:m}}(e)}))),a=Object(Q.a)(t,2),n=a[0],s=(a[1],r.a.useState("asc")),l=Object(Q.a)(s,2),i=l[0],o=l[1],c=r.a.useState("songname"),u=Object(Q.a)(c,2),d=u[0],h=u[1];return r.a.createElement($.a,null,r.a.createElement(ye.a,{style:{maxHeight:"80vh"}},r.a.createElement(me.a,{stickyHeader:!0,"aria-label":"sticky table"},r.a.createElement(we,{order:i,orderBy:d,onRequestSort:function(e,t){o(d===t&&"asc"===i?"desc":"asc"),h(t)}}),r.a.createElement(pe.a,null,function(e,t){var a=e.map((function(e,t){return[e,t]}));return a.sort((function(e,a){var n=t(e[0],a[0]);return 0!==n?n:e[1]-a[1]})),a.map((function(e){return e[0]}))}(n,function(e,t){return"desc"===e?function(e,a){return Ee(e,a,t)}:function(e,a){return-Ee(e,a,t)}}(i,d)).map((function(e){return r.a.createElement(fe.a,{hover:!0,key:e.songname},r.a.createElement(ge.a,{align:"right",component:"th",scope:"row"},e.songname),r.a.createElement(ge.a,{align:"right"},e.artists),r.a.createElement(ge.a,{align:"right"},e.album),r.a.createElement(ge.a,{align:"right"},e.acousticness),r.a.createElement(ge.a,{align:"right"},e.danceability),r.a.createElement(ge.a,{align:"right"},e.energy),r.a.createElement(ge.a,{align:"right"},e.instrumentalness),r.a.createElement(ge.a,{align:"right"},e.liveness),r.a.createElement(ge.a,{align:"right"},e.loudness),r.a.createElement(ge.a,{align:"right"},e.speechiness),r.a.createElement(ge.a,{align:"right"},e.valence),r.a.createElement(ge.a,{align:"right"},e.tempo))}))))))}var xe=a(233),Se=a.n(xe),Oe=function(e){Object(h.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(u.a)(this,a),(e=t.call(this)).state={width:0,height:0},e.getAllSongs=F.bind(Object(O.a)(e)),e.getSongObjects=H.bind(Object(O.a)(e)),e.createSongArray=e.createSongArray.bind(Object(O.a)(e)),e.calculateMostPopularGenre=e.calculateMostPopularGenre.bind(Object(O.a)(e)),e.createArtistToSongMap=e.createArtistToSongMap.bind(Object(O.a)(e)),e.createAnalysisArray=e.createAnalysisArray.bind(Object(O.a)(e)),e.handleTabSwitch=e.handleTabSwitch.bind(Object(O.a)(e)),e.renderTab=e.renderTab.bind(Object(O.a)(e)),e.renderPopularArtistTab=e.renderPopularArtistTab.bind(Object(O.a)(e)),e.renderSongScatterTab=e.renderSongScatterTab.bind(Object(O.a)(e)),e.updateWindowDimensions=e.updateWindowDimensions.bind(Object(O.a)(e)),e.renderSongChart=e.renderSongChart.bind(Object(O.a)(e)),e}return Object(d.a)(a,[{key:"componentWillMount",value:function(){this.setState({loading:!0})}},{key:"componentDidMount",value:function(){var e=Object(c.a)(o.a.mark((function e(){var t,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.updateWindowDimensions(),window.addEventListener("resize",this.updateWindowDimensions),e.next=4,this.createSongArray(this.props.filteredPlaylists);case 4:return t=e.sent,console.log(t),e.next=8,this.createAnalysisArray(t.slice());case 8:a=e.sent,console.log(a),a.forEach((function(e){t.find((function(t){return t.id===e.id})).song_analysis=e.song_analysis})),this.setState({artistToSongMap:this.createArtistToSongMap(t),allSongsArray:t,loading:!1,currentTab:"songScatter"});case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.updateWindowDimensions)}},{key:"updateWindowDimensions",value:function(){this.setState({width:window.innerWidth,height:window.innerHeight})}},{key:"createSongArray",value:function(){var e=Object(c.a)(o.a.mark((function e(t){var a,n,r,s,l,i,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(a=[],r=t.length,n=0;n<r;n++)null!=(s=t[n]).tracks&&(l=s.tracks.href,a.push(F(this.props.token,l)));return i=[],e.next=6,Promise.all(a);case 6:return e.sent.forEach((function(e){i=[].concat(Object(K.a)(i),Object(K.a)(e))})),c=he.a.uniqBy(i,"id"),e.abrupt("return",c);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createAnalysisArray",value:function(){var e=Object(c.a)(o.a.mark((function e(t){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getSongObjects(this.props.token,t);case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createArtistToSongMap",value:function(e){var t={},a=0;return e.forEach((function(e){null===e?console.log("Null Song @ "+a):e.artists.forEach((function(a){if(void 0===t[a.name])t[a.name]=[e];else{var n=t[a.name];n.some((function(t){return t.id===e.id}))||(n.push(e),t[a.name]=n)}}));a++})),console.log(t),t}},{key:"calculateMostPopularGenre",value:function(e){e.forEach((function(e){console.log(e.name)}))}},{key:"handleTabSwitch",value:function(e){this.setState({currentTab:e})}},{key:"renderTab",value:function(){var e=this.state.currentTab;return"songScatter"===e?this.renderSongScatterTab():"popularArtists"===e?this.renderPopularArtistTab():this.renderSongChart()}},{key:"renderPopularArtistTab",value:function(){this.state.height,this.state.width;return r.a.createElement("div",{className:"popularArtistChartContainer"},r.a.createElement(_.a,{className:"dataCardHeader",align:"center",component:"h1",variant:"h2"},"Most Popular Artists"),r.a.createElement(ue,{artistToSongMap:this.state.artistToSongMap}))}},{key:"renderSongScatterTab",value:function(){var e=.9*(.8*this.state.height-40),t=.7*this.state.width;return r.a.createElement("div",{className:"songPlotContainer"},r.a.createElement(le,{width:t,height:e,allSongsArray:this.state.allSongsArray}))}},{key:"renderSongChart",value:function(){return r.a.createElement("div",{className:"songChartContainer"},r.a.createElement(ke,{songList:this.state.allSongsArray}))}},{key:"render",value:function(){var e=this,t=this.renderTab();return r.a.createElement("div",{className:"AnalysisPage"},!0===this.state.loading&&r.a.createElement("div",null,r.a.createElement(Se.a,{color:"#FFFFFF",height:10,width:400,loading:this.state.loading}),r.a.createElement("div",{className:"loading-text"},"Fetching the data ",r.a.createElement("br",null),"Hold tight!")),!1===this.state.loading&&r.a.createElement("div",{className:"AnalysisPageBody"},r.a.createElement("div",{className:"tabContainer"},r.a.createElement(Y.a,{variant:"contained",color:"primary",onClick:function(){return e.handleTabSwitch("songScatter")}},"Song Scatter"),r.a.createElement(Y.a,{variant:"contained",color:"primary",onClick:function(){return e.handleTabSwitch("popularArtists")}},"Artist Pie Chart"),r.a.createElement(Y.a,{variant:"contained",color:"primary",onClick:function(){return e.handleTabSwitch("songList")}},"Songs List")),r.a.createElement("div",{className:"dataContainer"},t)))}}]),a}(n.Component),je=function(e){Object(h.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(u.a)(this,a),(e=t.call(this)).state={token:null,user_info:{display_name:"",id:""},no_user_data:!0,no_playlist_data:!0,playlists:null,number_playlists:0,showAnalysis:!1,numSelectedPlaylists:0},e.getUserInformation=B.bind(Object(O.a)(e)),e.getPlaylistNames=U.bind(Object(O.a)(e)),e.removeNonOwnedPlaylists=e.removeNonOwnedPlaylists.bind(Object(O.a)(e)),e.createPlaylistCards=e.createPlaylistCards.bind(Object(O.a)(e)),e.handleCardClick=e.handleCardClick.bind(Object(O.a)(e)),e.selectAllPlaylists=e.selectAllPlaylists.bind(Object(O.a)(e)),e.deselectAllPlaylists=e.deselectAllPlaylists.bind(Object(O.a)(e)),e.handleGoClick=e.handleGoClick.bind(Object(O.a)(e)),e.filterPlaylists=e.filterPlaylists.bind(Object(O.a)(e)),e.selectOwnedPlaylists=e.selectOwnedPlaylists.bind(Object(O.a)(e)),e}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=Object(c.a)(o.a.mark((function e(){var t,a,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=f.access_token)){e.next=15;break}return this.setState({token:t}),e.next=5,B(t);case 5:return a=e.sent,console.log("fetched user information..."+a),a?this.setState({user_info:a.data,no_user_data:!1}):this.setState({no_user_data:!0}),console.log("Fetching playlist data"),e.next=11,U(t);case 11:n=e.sent,console.log("done fetching playlists"),null!=n.length?(n.forEach((function(e){return e.toBeUsed=!1})),this.setState({playlists:n,number_playlists:n.length,numSelectedPlaylists:0,no_playlist_data:!1})):this.setState({playlists:[],number_playlists:0,numSelectedPlaylists:0,no_playlist_data:!0}),console.log(this.state.playlists);case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){clearInterval(this.interval)}},{key:"removeNonOwnedPlaylists",value:function(){for(var e=[],t=0;t<this.state.playlists.length;t++)this.state.playlists[t].owner.id===this.state.user_info.id&&e.push(this.state.playlists[t]);this.setState({playlists:e})}},{key:"createPlaylistCards",value:function(){var e=this;return r.a.createElement(J.a,{container:!0,justify:"center",align:"center",spacing:3},this.state.playlists.map((function(t){return r.a.createElement(J.a,{item:!0,xs:6},r.a.createElement(L,{playlistObject:t,toBeUsed:t.toBeUsed,handleCardClick:e.handleCardClick}))})))}},{key:"handleCardClick",value:function(e){var t=this.state.playlists,a=0;t.forEach((function(t){t.id===e&&(a=!0===t.toBeUsed?-1:1,t.toBeUsed=!t.toBeUsed)})),this.setState((function(e){return{playlists:t,numSelectedPlaylists:e.numSelectedPlaylists+a}}))}},{key:"selectAllPlaylists",value:function(){var e=this.state.playlists;e.forEach((function(e){e.toBeUsed=!0})),this.setState({playlists:e,numSelectedPlaylists:e.length})}},{key:"deselectAllPlaylists",value:function(){var e=this.state.playlists;console.log(e),e.forEach((function(e){e.toBeUsed=!1})),this.setState({playlists:e,numSelectedPlaylists:0})}},{key:"selectOwnedPlaylists",value:function(){var e=this,t=this.state.playlists,a=0;t.forEach((function(t){t.owner.id!==e.state.user_info.id?t.toBeUsed=!1:(t.toBeUsed=!0,a++)})),this.setState({playlists:t,numSelectedPlaylists:a})}},{key:"handleGoClick",value:function(){this.setState({showAnalysis:!0})}},{key:"filterPlaylists",value:function(){var e=[];return this.state.playlists.forEach((function(t){1==t.toBeUsed&&e.push(t)})),e}},{key:"render",value:function(){var e=this,t=this.state.numSelectedPlaylists,a=this.state.number_playlists,n=null;return this.state.no_playlist_data||(n=this.createPlaylistCards()),r.a.createElement("div",{className:"data-page-main"},!this.state.token&&r.a.createElement("div",{className:"error-header"},r.a.createElement("div",null,r.a.createElement("h1",null,"You dont seem to be logged in to Spotify"),r.a.createElement("h3",null,"Go back to the home page to log in"),r.a.createElement(v.b,{to:"/"},r.a.createElement(Y.a,{variant:"contained",color:"primary"},"Home")))),this.state.token&&!this.state.no_playlist_data&&!this.state.showAnalysis&&r.a.createElement(V.a,null,r.a.createElement("div",{className:"above-playlist-container"},r.a.createElement(_.a,{color:"white",align:"center",component:"h1",variant:"h2"},"Pick some Playlists to Analyze")),r.a.createElement($.a,{className:"data-body",elevation:10},r.a.createElement(V.a,{className:"sorting-button-container"},r.a.createElement(_.a,{color:"black",align:"center",component:"h3",variant:"h3"},"Filter Playlists"),r.a.createElement(V.a,{py:2},r.a.createElement(Y.a,{className:"filter-buttons",variant:"contained",color:"secondary",onClick:function(){return e.selectAllPlaylists()}},"Select All")),r.a.createElement(V.a,{py:2},r.a.createElement(Y.a,{className:"filter-buttons",variant:"contained",color:"secondary",onClick:function(){return e.deselectAllPlaylists()}},"Remove All")),r.a.createElement(V.a,{py:2},r.a.createElement(Y.a,{className:"filter-buttons",variant:"contained",color:"secondary",onClick:function(){return e.selectOwnedPlaylists()}},"Owned by Me")),r.a.createElement("div",{style:{marginTop:"auto"}}),r.a.createElement(_.a,{color:"black",align:"center",component:"h4",variant:"subtitle1"},t," Playlists Selected"),r.a.createElement(_.a,{color:"black",align:"center",component:"h4",variant:"subtitle1"},a," Playlists Total")),r.a.createElement(V.a,{className:"card-container"},n)),r.a.createElement(V.a,{className:"footer"},r.a.createElement(Y.a,{className:"footer-button",variant:"contained",color:"primary",onClick:function(){return e.handleGoClick()}},"Go"))),this.state.showAnalysis&&this.state.token&&r.a.createElement(Oe,{filteredPlaylists:this.filterPlaylists(),token:this.state.token}))}}]),a}(n.Component),Ce=function(e){Object(h.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(u.a)(this,a),(e=t.call(this)).state={},e}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=Object(c.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){return r.a.createElement("div",{className:"AboutPage"},r.a.createElement("h1",null,"Welcome to the about page!"))}}]),a}(n.Component),Ae=function(e){Object(h.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(u.a)(this,a),(e=t.call(this)).state={auth_token:null},e}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=Object(c.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=f.access_token,this.setState({auth_token:t});case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){return r.a.createElement(v.a,null,r.a.createElement("div",{className:"App"},r.a.createElement("body",null,r.a.createElement(E.c,null,r.a.createElement(E.a,{path:"/about"},r.a.createElement(Ce,null)),r.a.createElement(E.a,{path:"/data"},r.a.createElement(je,{auth_token:this.state.auth_token})),r.a.createElement(E.a,{path:"/"},r.a.createElement(S,{auth_token:this.state.auth_token}))))))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(Ae,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[246,1,2]]]);
//# sourceMappingURL=main.e1906b8c.chunk.js.map